---
layout: post
title:  "security_ 취약점 DB_02"
author: fennec-fox
tags: Security
subtitle: "   "
category:  blog
---

<br>

# 취약점 DB

1. CWE(Common Weakness Enumeration) 

2. CVE(Common Vulnerabilities and Exposures)
3. SANS Top 25
4. OWASP Top 10

<br>

### 막간상식! 

<br>

- 보안관련 법률 [http://www.law.go.kr/](http://www.law.go.kr/lsInfoP.do?urlMode=lsInfoP&lsId=003649#0000)
- 

<br>

### SANS Top 25

#### 2. 위험한 자원 관리(8개 취약점)

소프트웨어가 중요한 시스템 자원을 적절하게 생성, 사용, 전송, 폐기하지 않는 것과 관련이 있는 취약점을 정의

- 입력 크기를 검사하지 않고 버퍼에 복사(전통적인 버퍼 오버)_ C언어나 C++에서 발생
- 금지된 디렉토리에 접근하는 것을 제한하지 않음
- 무결성 검사 없이 코드 다운로드
- 신뢰할 수 없는 제어 영역에서 온 기능을 포함
- 잠재적으로 위험한 함수를 사용
- 버퍼 크기를 잘못 계사함
- 형식 문자열을 통제하지 않음
- 정수 오버플로우 또는 랩 어라운드

<br>

#### 3. 방어 미비(11개 취약점)

오남용하거나 쉽게 무시되는 방어 기법과 관련이 있는 취약점을 정의

- 핵심 기능에 대해 인증을 누락
- 인가 기능을 누락
- 인증에 사용되는 데이터를 코드에 직접 기록
- 민감한 데이터를 암호화 하지 않음
- 신뢰할 수 없는 입력 정보에 의존해 보안성을 결정
- 불필요한 권한으로 실행하는 것
- 올바르지 않은 인가 방식
- 핵심 자원에 대한 잘못된 권한 설정
- 안전하지 않은 암호화 알고리즘을 사용
- 인증 시도 회수를 제한하지 않음
- 인증 시도 회수를 제한 하지 않음
- 솔트 없이 일방향 해시를 사용

<br>

# 강사님 강의

- `금지된 디렉토리에 접근`
  - 경로추적 : 외부 입력값을 경로조작 문자열 포함 여여부를 확인하지 않고, 내부 파일을 참조하는데 사용되는 경우 발생 ==> 권한 밖의 파일에 접근 가능

```java

download.jsp
---------------------------------------------------
String fname = request.getParameter("file_name");
File f = new File("/upload/data/2019/08/" + fname);
---------------------------------------------------

- 정상 요청 : download.jsp?file_name=abc.gif ⇒ /upload/data/2019/08/abc.gif 파일을 다운로드 처리
- 비정상 요청 : download.jsp?file_name=../../../../../../../../../etc/passwd ⇒ /ect/passw

```

- 경로 조작시 '..' or ' /' 와 같은 문자가 들어오지 않도록 한다.

<br>

- `무결성 검사 없이 코드 다운로드`

  - SCM(Supply Chain Management) 를 통한 공격이 많아지는 추세

    많이 쓰는 오픈소스코드에 공격자의 코드를 삽입하여 같이 설치되게 함

    이와 같은 사항을 막기 위해 해쉬값을 이용한 무결성 검사가 필요하다. 

<br>

- `잠재적으로 위험한 함수를 사용`
  - 금지된 함수 및 안전한 대안 목록 : [SDL List of Banned Functions](https://github.com/intel/safestringlib/wiki/SDL-List-of-Banned-Functions)

<br>

- `형식 문자열` : 데이터의 출력 형식을 지정
  - 형식문자열을 변수로 지정했을 때, 공격자가 '%s'를 넣어야 할 변수에 '%s%s%s%s%s%s' 와 같이 넣으면 C언어에서는 메모리를 잡아 먹게 된다.

 

<br>

--------------------------------------------------------------------------------------------------------

<br>

- `핵심 기능에 대해 인증을 누락 / 인가 기능 누락`

  - 웹 페이지 제작시

  1. 사이트에서 url을 넣었을 때, 바로 사용 할 수도 있으니 모든 페이지에 인증기능 넣었나 확인

  2. 웹 페이지의 기능을 나눠 놓은 후, 그룹을 지정해서 그룹에 권한을 부여해서 사용자의 그룹을 옮길 수 있도록 하는 것이 좋다.

<br>

- `민감한 데이터를 암호화`

  - 웹 페이지 제작시

  1. 데이터 목록 : 데이터 딕션어리 필요(ex> 사람이름 : 영문자, 대 소문자)

  2. 데이터 목록에 대한 암호화 처리를 해야한다. 데이터의 직접적인 유출을 막기 위해서 필요하다.

  3. 데이터를 저장하는 곳, 데이터를 복호화 하는 곳, 데이터를 전달하는 방법(ex> https사용) 고려해야 한다.

<br>

- 신뢰할 수 없는 입력 정보

  입력 -------------------------------------> 처리 ------------------------------> 출력

  <br>

  위의 처리 로직에서 입력 값은 다음과 같이 받을 수 있다.

  1) 안전한 입력 : 서버에서 처리한 값

  2) 안전하지 않은 것 : 사용자 입력 값

  그러므로, 안전한 처리가 되기 위해서는 안전한 입력 값을 쓰고 꼭 필요한 경우에만 사용자 입력값을 받는 것이 좋다.
  
  - 중요한 데이터인 경우 hidden field로 값을 숨겨 놓았더라도 클라이언트에서 받은 값을 그대로 사용한다면 변경 가능성이 있기 때문에 서버의 값을 가지고 처리 할 수 있도록 한다. 

<br>

