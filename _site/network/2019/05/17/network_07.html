<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Network_ Transport layer_05 | 2019 집순이네</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="Network_ Transport layer_05">
<meta name="author" content="fennec-fox">
<meta property="og:locale" content="en_US">
<link rel="canonical" href="http://localhost:4000/network/2019/05/17/network_07.html">
<meta property="og:url" content="http://localhost:4000/network/2019/05/17/network_07.html">
<meta property="og:site_name" content="2019 집순이네">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-05-17T00:00:00+09:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Network_ Transport layer_05">
<script type="application/ld+json">
{"url":"http://localhost:4000/network/2019/05/17/network_07.html","author":{"@type":"Person","name":"fennec-fox"},"headline":"Network_ Transport layer_05","dateModified":"2019-05-17T00:00:00+09:00","datePublished":"2019-05-17T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/network/2019/05/17/network_07.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="shortcut icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="2019 집순이네">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="2019 집순이네" src="" onerror="this.style.display='none'">
  2019 집순이네
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/about.html">ABOUT</a>




<span class="page-link">

<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: '',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
</div>
        </nav>
</div>
  </div>
</header>

<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  })();
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Network_ Transport layer_05</h1>
  <h2 class="post-subtitle">flow control, three way handshake, closing a connection, 네트워크 혼잡 통제의 원리</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2019-05-17T00:00:00+09:00" itemprop="datePublished"><i class="fa fa-calendar"></i> May 17, 2019
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 3 mins</span>
  </p>
<div class="post-tags"><a class="post-tag" href="/tags.html#Network">#Network</a></div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p><br></p>

<p><code class="language-plaintext highlighter-rouge">[ 한양대학교 이석복 교수님 공개강의 내용정리 ]</code></p>

<p>수업자료 = <a href="http://kocw.xcache.kinxcdn.com/KOCW/document/2015/hanyang/leesukbok0326/7.pdf"> Connection-oriented transport : TCP_02 </a></p>

<p><br></p>

<h1 id="3-flow-control">3. flow control</h1>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Receiver 가 받을 수 있을만큼의 데이터를 보내도록 흐름을 컨트롤</code> 해주는 것</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Receiver는 sender에게 남은 공간이 얼마나 있는지 계속 보내줌</code></p>
  </li>
  <li>
    <p>만약 receiver의 공간이 ‘0’이라면, sender에게 ‘0’이라고 보내주면 sender는 data를 보내는 것을 멈추는데, 언제까지 기다려야 하는지 모르기때문에</p>

    <p>sender는 주기적으로 receiver에게 segment를 보내는데, 데이터를 넣지 않고 보냄. receiver가 receiver buffer가 자리가 생겼다고 보내주면 data를 보냄</p>
  </li>
</ul>

<p><br></p>

<p>[질문] flow control은 속도를 조절하는 걸까요? 양을 조절하는 걸까요?</p>

<p>—&gt; 보내는 data의 양은 속도에 비례하기때문에 같은 개념으로 보아야한다.</p>

<p><br></p>

<h1 id="4-connection-management">4. connection management</h1>

<h3 id="1-tree-way-handshake">1) Tree way handshake</h3>

<ol>
  <li>
    <p>클라이언트에서 데이터를 넣지 않은 세그먼트를 서버에 보낸다.</p>

    <p>이 때, <code class="language-plaintext highlighter-rouge">SYN의 값을 '1'로 바꾸어서 보낸다.</code> (다른 값에서는 모두 ‘0’)</p>

    <p>결국 SYN은 너와 TCP연결을 하고 싶다라는 의미이다.</p>

    <p>그리고 <code class="language-plaintext highlighter-rouge">세그먼트의 sequence number를 같이 보낸다.</code></p>
  </li>
  <li>
    <p>서버는 답으로 ACK=’1’, SYN =’1’로 보내고 Seq # 를 새로 재정의해서 보낸다. 그리고 ACKnumber 로 클라이언트의 seq # 에 + 1을 해서 보낸다.</p>
  </li>
  <li>
    <p>마지막으로 클라이언트는 서버로 부터 받은 세그먼트에 대한 ACK를 보내준다. 이 때, 서버의 seq # 에 + 1을 해서 보낸다. 이 이후의 SYNACK는 0이된다. (HTTP request를 데이터에 포함시킴)</p>
  </li>
</ol>

<p><br></p>

<p>위의 <code class="language-plaintext highlighter-rouge">세 과정이 끝나면 send buffer와 receive buffer가 생성</code>되어 <code class="language-plaintext highlighter-rouge">각각에 들어올 seq #를 가지고 있게 된다.</code></p>

<p><br></p>

<p>[질문] 2 way handshake를 하면 안되고, 3 way를 하는 이유는?</p>

<ul>
  <li>서버가 보낸 값도 클라이언트가 잘 받았다는 것을 확인하기 위해서</li>
</ul>

<p><br></p>

<h3 id="2-closing-a-connection">2) closing a connection</h3>

<ul>
  <li>
    <p>클라이언트가 서버에게 <code class="language-plaintext highlighter-rouge">FIN값을 보내면</code>, 서버가 <code class="language-plaintext highlighter-rouge">ACK값을 돌려주고</code></p>

    <p>서버도 FIN값을 클라언트에게 전달한다. 마지막으로 클라이언트가 ACK로  답을 주면 통신이 끝난다.</p>
  </li>
</ul>

<p><br></p>

<p>[질문] 클라이언트가 마지막 ACK 후, ‘Timed wait’을 가진 뒤 통신을 닫는 이유는 무엇일까?</p>

<ul>
  <li>ACK를 보낸 후에도, 클라이언트가 가지고 있는 send buffer 값과 receive buffer 값을 한동안은 가지고 있게 하기위해서 이다.</li>
  <li>만약에 마지막 ACK가 유실되면, 서버는 닫지 않고 기다리면서 FIN을 계속 보내는 상황이 벌어지기 때문에 클라이언트는 한 동안은 통신을 닫지 않고 기다린다.</li>
</ul>

<p><br></p>

<h1 id="-principles-of-congestion-control">** principles of congestion control</h1>

<ul>
  <li>
    <p>클라이언트와 서버사이에 네트워크는 주인이 없고 public 이다.</p>
  </li>
  <li>
    <p>공용 리소스에 많은 컴퓨터가 붙는 모양인데, 각자가 원하는 것은 보내는 양은 많고 처리속도는 빠르길 바란다. TCP의 구조상 중간에서 유실이 되면 재전송을 하는 구조이기 때문에, 네트워크가 막혀버리면 계속 재전송을 하면서 데이터를 보내주고 그만큼 네트워크가 더 막혀버리는 현상이 생기게 된다. 이 문제를 어떻게 해결하면 좋을까?</p>
  </li>
  <li>
    <p>그래서 <code class="language-plaintext highlighter-rouge">TCP가 해야할 일 중의 하나가 네트워크가 막히지 않게 하는 일</code>도 해야한다. 곧, 각자 자신의 데이터가 유실되지 않고 잘 처리되게 하기위해서 각자가 보내는 데이터 양을 줄여야 한다.</p>
  </li>
  <li>
    <p>그럼 <code class="language-plaintext highlighter-rouge">네트워크의 상황은 어떻게 알 수 있을까?</code></p>

    <ol>
      <li>
        <p>네트워크에서 라우터들이 나에게 정보를 주는 방법</p>

        <p>—&gt; 현재는 라우터가 바빠서 그런 일을 해주지 않음</p>
      </li>
      <li>
        <p>클라이언트와 서버가 네트워크 안에 있는 상황을 유추해서 네트워크 상황이 나쁜 것 같으면 data의 양을 줄이고, 네트워크 상황이 좋은 것 같으면 data의 양을 늘린다.</p>

        <p>—&gt; 세그먼트를 보냈을 때, ACK가 늦게오거나 유실된다면 중간에 뭔가가 문제가 생긴것으로 보고 data의 양을 조절함. 곧, <code class="language-plaintext highlighter-rouge">TCP의 ACK의 상태를 보고 유추해서 네트워크의 상황을 판단</code>한다.</p>
      </li>
    </ol>
  </li>
</ul>

<p><br></p>



    </div>

</article>
<div class="post-nav">
<a class="previous" href="/blockchain/2019/05/16/blockchain_01.html" title="Django_ Blockchain 01.이더리움(Ethereum)이란">Django_ Blockchain 01.이더리움(Ethereum)이란</a><a class="next" href="/network/2019/05/18/network_08.html" title="Network_ Transport layer_06">Network_ Transport layer_06</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/til/2019/03/28/TIL_5.html" title="Network_ Transport layer_06">TIL_ 20190328</a></li>
<li><a class="post-link" href="/til/2019/04/28/TIL_15.html" title="Network_ Transport layer_06">TIL_ 20190428</a></li>
<li><a class="post-link" href="/javascript/2019/09/12/Javascript_-%EC%9D%91%EC%9A%A9.html" title="Network_ Transport layer_06">Javascript_ 응용</a></li>
<li><a class="post-link" href="/node/2019/07/29/node_p_01.html" title="Network_ Transport layer_06">Node.js + React 웹페이지 제작</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
      <div>Copyright © 2019 @Darae</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
