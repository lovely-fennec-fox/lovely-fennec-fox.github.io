<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Docker_ 기본명령어, 활용법 - My personal blog</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#311e3e">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>
  <div class="flex-container">
  <header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <ul>
          <li><a href="/">Blog</a></li>
          <li><a href="/about">About</a></li>
        </ul>
      </nav>
      <p class="logo"><a href="/">Darae</a></p>
      <div class="search-icon-container">
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div>
    </div>
  </div>
</header> <!-- End Header -->

  <article class="article-page">
    <div class="page-image">
      <div class="cover-image" style="background: url(/assets/img/) center no-repeat; background-size: cover;"></div>
    </div>
    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">Docker_ 기본명령어, 활용법</h1>
          <div class="page-date"><time datetime="2019-06-03 00:00:00 +0900">2019, Jun 03</time></div>
        </div>
        <p><br /></p>

<h1 id="ubuntu-1604에-doker-설치하기">Ubuntu 16.04에 Doker 설치하기</h1>

<h3 id="1-doker-레파지토리를-추가한다">1. Doker 레파지토리를 추가한다.</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vi /etc/apt/sources.list

<span class="c"># 아래의 레파지토리를 추가한다.</span>
deb https://apt.dockerproject.org/repo ubuntu-xenial main

</code></pre></div></div>

<p><br /></p>

<h3 id="2-https-통신에-사용되는-패키지와-공개키를-설치">2. HTTPS 통신에 사용되는 패키지와 공개키를 설치</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 패키지 설치</span>

<span class="nv">$ </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> apt-transport-https ca-certificates curl gnupg-agent software-properties-common

</code></pre></div></div>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 공개키 설치</span>

<span class="nv">$ </span>apt-key adv <span class="nt">--keyserver</span> hkp://p80.pool.sks-keyservers.net:80 <span class="nt">--recv-keys</span> 58118E89F3A912897C070ADBF76221572C52609D

</code></pre></div></div>

<p><br /></p>

<h3 id="3-linux-image-extra와-docker-engine-패키지-설치">3. Linux-image-extra와 docker-engine 패키지 설치</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>apt-get update

<span class="nv">$ </span>apt-get <span class="nb">install </span>linux-image-extra-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span>
<span class="nv">$ </span>apt-get <span class="nb">install </span>docker-engine

</code></pre></div></div>

<p><br /></p>

<h3 id="4-docker-version-확인하기">4. Docker version 확인하기</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker version


Client:
 Version:      17.05.0-ce
 API version:  1.29
 Go version:   go1.7.5
 Git commit:   89658be
 Built:        Thu May  4 22:10:54 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.05.0-ce
 API version:  1.29 <span class="o">(</span>minimum version 1.12<span class="o">)</span>
 Go version:   go1.7.5
 Git commit:   89658be
 Built:        Thu May  4 22:10:54 2017
 OS/Arch:      linux/amd64
 Experimental: <span class="nb">false</span>

</code></pre></div></div>

<p><br /></p>

<h1 id="doker-image-생성-조회-삭제">Doker Image 생성, 조회, 삭제</h1>

<p>이미지를 만들기 위해 <code class="highlighter-rouge">Dockerfile</code>이라는 이미지 빌드용 DSLDomain Specific Language 파일을 사용합니다. 단순 텍스트 파일로 일반적으로 소스와 함께 관리합니다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># [Dockerfile]를 예시로 만들어봅시다.</span>

FROM golang:1.9

RUN <span class="nb">mkdir</span> /echo

COPY main.go /echo

CMD <span class="o">[</span> <span class="s2">"go"</span>, <span class="s2">"run"</span>, <span class="s2">"/echo/main.go"</span> <span class="o">]</span>

</code></pre></div></div>

<p><br /></p>

<p>이미지를 만들 파일 작성합니다. ( 기존에 있는 설치파일어도 됨)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># [main.go]라는 파일을 예제로 만들어봅시다.</span>

package main

import <span class="o">(</span> 
	<span class="s2">"fmt"</span> 
	<span class="s2">"log"</span>
	<span class="s2">"net/http"</span>
<span class="o">)</span>

func main<span class="o">()</span> <span class="o">{</span>
    	http.HandleFunc<span class="o">(</span><span class="s2">"/"</span>, func<span class="o">(</span>w http.ResponseWriter, r <span class="k">*</span>http.Request<span class="o">)</span> <span class="o">{</span>
		log.Println<span class="o">(</span><span class="s2">"received request"</span><span class="o">)</span>
		fmt.Fprintf<span class="o">(</span>w, <span class="s2">"Hello Docker !!!"</span><span class="o">)</span>
    	<span class="o">})</span>
	log.Println<span class="o">(</span><span class="s2">"start server"</span><span class="o">)</span>

	server :<span class="o">=</span> &amp;http.Server<span class="o">{</span>Addr: <span class="s2">":8080"</span><span class="o">}</span>
	<span class="k">if </span>err :<span class="o">=</span> server.ListenAndServe<span class="o">()</span><span class="p">;</span> err <span class="o">!=</span> nil <span class="o">{</span>
		log.Println<span class="o">(</span>err<span class="o">)</span>
	<span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><br /></p>

<h3 id="1-image-생성하기">1. Image 생성하기</h3>

<ul>
  <li><code class="highlighter-rouge">build</code> : Image 생성</li>
  <li><code class="highlighter-rouge">-t</code> : 작업이 진행되는 것을 보여줌</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># example/ : 여러사람이 image를 사용할 수 있도록 내 아이디를 지정하지 않고, example로 지정해줌</span>
<span class="c"># tag : defaul 값 = latest</span>

<span class="nv">$ </span>docker image build <span class="nt">-t</span> example/[Image Name]:[tag]

</code></pre></div></div>

<p><br /></p>

<p>Dockfile에 작성한 순서대로 Image가 생성된다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sending build context to Docker daemon  3.072kB
<span class="sb">`</span>Step 1/4 : FROM golang:1.9<span class="sb">`</span>
1.9: Pulling from library/golang
55cbf04beb70: Pull <span class="nb">complete 
</span>1607093a898c: Pull <span class="nb">complete 
</span>9a8ea045c926: Pull <span class="nb">complete 
</span>d4eee24d4dac: Pull <span class="nb">complete 
</span>9c35c9787a2f: Pull <span class="nb">complete 
</span>8b376bbb244f: Pull <span class="nb">complete 
</span>0d4eafcc732a: Pull <span class="nb">complete 
</span>186b06a99029: Pull <span class="nb">complete 
</span>Digest: sha256:8b5968585131604a92af02f5690713efadf029cc8dad53f79280b87a80eb1354
Status: Downloaded newer image <span class="k">for </span>golang:1.9
 <span class="nt">---</span><span class="o">&gt;</span> ef89ef5c42a9
<span class="sb">`</span>Step 2/4 : RUN <span class="nb">mkdir</span> /echo<span class="sb">`</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>28fc48e76b1a
 <span class="nt">---</span><span class="o">&gt;</span> 024d93e00764
Removing intermediate container 28fc48e76b1a
<span class="sb">`</span>Step 3/4 : COPY main.go /echo<span class="sb">`</span>
 <span class="nt">---</span><span class="o">&gt;</span> 9536233ba248
Removing intermediate container d660cc064687
<span class="sb">`</span>Step 4/4 : CMD go run /echo/main.go<span class="sb">`</span>
 <span class="nt">---</span><span class="o">&gt;</span> Running <span class="k">in </span>e58fc269864c
 <span class="nt">---</span><span class="o">&gt;</span> 6775e8903765
Removing intermediate container e58fc269864c
Successfully built 6775e8903765
Successfully tagged example/echo:latest


</code></pre></div></div>

<p><br /></p>

<h3 id="2-설치된-image-확인하기">2. 설치된 Image 확인하기</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nv">$ </span>docker images

</code></pre></div></div>

<p><br /></p>

<h3 id="3-image-삭제하기">3. Image 삭제하기</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 특정 Image 삭제</span>
<span class="nv">$ </span>docker rmi <span class="o">[</span>Image NAME]

<span class="c"># 모든 Image </span>
<span class="nv">$ </span>docker rmi <span class="si">$(</span>docker image <span class="nb">ls</span> <span class="nt">-aq</span><span class="si">)</span>


</code></pre></div></div>

<p><br /></p>

<h3 id="4-만들어진-container를-customizing-후-다시-image로-생성하기">4. 만들어진 container를 customizing 후 다시 Image로 생성하기</h3>

<ul>
  <li><code class="highlighter-rouge">commit</code> 사용하기</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker commit <span class="o">[</span>container_name] example/[Image_name]:[tag]


</code></pre></div></div>

<p>container를 생성해 놓은 후, 내가 설치하고 싶은 프로그램을 설치한 후 다시 Image로 만들어 놓을 때 사용한다.</p>

<p><br /></p>

<h1 id="container-생성-조회-삭제">Container 생성, 조회, 삭제</h1>

<h3 id="1-컨테이너-생성">1. 컨테이너 생성</h3>

<ul>
  <li><code class="highlighter-rouge">--name</code> : container 이름 지정</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># run : container 생성</span>

<span class="nv">$ </span>docker container run <span class="nt">--name</span> <span class="o">[</span>NAME] <span class="o">[</span>IMAGE_NAME]


</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">-d</code> : 실행할 때 background에서 실행하도록 지정</li>
  <li><code class="highlighter-rouge">-i</code> : 호스트와 container가 상호 입출력하도록 지정</li>
  <li><code class="highlighter-rouge">-t</code> : tty를 활성화하여 bash쉘을 사용함</li>
  <li><code class="highlighter-rouge">-p</code> : port 매핑</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container run <span class="nt">-p</span> <span class="o">[</span>원하는 포트번호]:8080 <span class="nt">-d</span> <span class="o">[</span>IMAGE_NAME]


</code></pre></div></div>

<h3 id="2--container-조회">2.  container 조회</h3>

<ul>
  <li><code class="highlighter-rouge">ps</code> : container 조회</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker ps


</code></pre></div></div>

<ul>
  <li><code class="highlighter-rouge">ls -a</code> : container조회</li>
  <li><code class="highlighter-rouge">--filter="name=[container이름]"</code> : 특정 이름을 지정 할 수 있음</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container <span class="nb">ls</span> <span class="nt">-a</span> <span class="nt">--filter</span><span class="o">=</span><span class="s2">"name=[container이름]"</span>


</code></pre></div></div>

<p><br /></p>

<h3 id="3-특정-이름의-container-삭제">3. 특정 이름의 container 삭제</h3>

<ul>
  <li><code class="highlighter-rouge">-q</code> :</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># rm -f container 강제 삭제</span>
<span class="c"># $( 삭제하고 싶은 container ) </span>

<span class="nv">$ </span>docker container <span class="nb">rm</span> <span class="nt">-f</span> <span class="si">$(</span>docker container <span class="nb">ls</span> <span class="nt">-aq</span> <span class="nt">--filter</span><span class="o">=</span><span class="s2">"name=ooo"</span><span class="si">)</span>


</code></pre></div></div>

<p><br /></p>

<h1 id="container-활용">container 활용</h1>

<h3 id="1-container--중지-및-재실행">1. container  중지 및 재실행</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 중지</span>
<span class="nv">$ </span>docker container stop <span class="o">[</span>CONTAINER_NAME]

<span class="c"># 실행</span>
<span class="nv">$ </span>docker container start <span class="o">[</span>CONTAINER_NAME]


</code></pre></div></div>

<p><br /></p>

<h3 id="2-container-사용현황-확인">2. container 사용현황 확인</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container stats


</code></pre></div></div>

<p><br /></p>

<h3 id="3-container와-호스트사이에-파일-복사하기">3. container와 호스트사이에 파일 복사하기</h3>

<ul>
  <li>container 에서 호스트로 복사(<code class="highlighter-rouge">cp</code> 명령어 사용)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container <span class="nb">cp</span> <span class="o">[</span>Container ID]:[path] <span class="o">[</span>host_path]  


</code></pre></div></div>

<p><br /></p>

<ul>
  <li>호스트에서 container로 복사</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container <span class="nb">cp</span> <span class="o">[</span>host_path] <span class="o">[</span>container ID]:[path]


</code></pre></div></div>

<p>컨테이너를 중지하고 재실행해야 적용됩니다-</p>

<p><br /></p>

<h3 id="4-container-안으로-들어가기">4. container 안으로 들어가기</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker <span class="nb">exec</span> <span class="nt">-it</span> <span class="o">[</span>container ID] /bin/bash


</code></pre></div></div>

<p><br /></p>

<h1 id="dock-hub에-생성한-이미지를-올려봅시다">Dock Hub에 생성한 이미지를 올려봅시다.</h1>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 본인의 아이디와 비번으로 로그인 한 후</span>
<span class="nv">$ </span>docker login

<span class="c"># Image를 push해줌</span>
<span class="nv">$ </span>docker push <span class="o">[</span>나의 hub ID]/[Image Name]


</code></pre></div></div>

<p><br /></p>


        <div class="page-footer">
          <div class="page-tag">
            <span>Tags:</span>
            
            <a href="/tags#Docker" class="tag">| Docker</a>
            
          </div><!-- End Tags -->
          <div class="page-share">
            <span>Share:</span>
            <a href="https://twitter.com/intent/tweet?text=Docker_ 기본명령어, 활용법&url=http://localhost:4000/docker/" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="https://facebook.com/sharer.php?u=http://localhost:4000/docker/" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=http://localhost:4000/docker/" title="Share on Google+" rel="nofollow" target="_blank"><i class="fa fa-google" aria-hidden="true"></i></a>
          </div><!-- End Share -->
        </div>
        <section class="author-box">
  <img src="/assets/img/image.jpg" alt="Darae" class="author-img">
  <div class="author-desc">
    <h2>Darae</h2>
    <p>Hello</p>
    <ul>
      
        <li class="email"><a href="mailto:love.pink.edacb1@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
      
      
        <li class="phone"><a href="tel:044 825 5523"><i class="fa fa-phone" aria-hidden="true"></i></a></li>
      
      
        <li class="website"><a href="https://artemsheludko.github.io" target="_blank"><i class="fa fa-globe" aria-hidden="true"></i></a></li>
      
      
        <li class="twitter"><a href="https://twitter.com/artemsheludko_" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
      
    </ul>
  </div>
</section>

        <div class="recent-box">
  <h2 class="recent-title">Recent post</h2>
  <div class="recent-list">
    
      
        <a href="/react_-09_ErrorBoundary/" class="recent-item" style="background: url(/assets/img/post-8.jpg) center no-repeat; background-size: cover;"><span>React_ ErrorBoundary</span></a>
      
    
      
        <a href="/react_-08_Context-API/" class="recent-item" style="background: url(/assets/img/post-8.jpg) center no-repeat; background-size: cover;"><span>React_ Context API를 사용한 전역 값 관리</span></a>
      
    
      
        <a href="/react_-07_useReducer/" class="recent-item" style="background: url(/assets/img/post-8.jpg) center no-repeat; background-size: cover;"><span>React_ useReducer Hook</span></a>
      
    
      
        <a href="/react_-06_useEffect,-useMemo,userCallback/" class="recent-item" style="background: url(/assets/img/post-8.jpg) center no-repeat; background-size: cover;"><span>React_ useEffect Hook</span></a>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup">
  <h2 class="newsletter-title">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="//" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->

        <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//fennec-fox.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

      </div>
    </div> <!-- End Wrapper -->
  </article>
  <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="Search">
        </div>
      </form>
      <ul id="results-container" class="results-search"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

  <footer class="main-footer">
  <div class="copyright">
    <p>2019 &copy; Darae</p>
  </div>
</footer> <!-- End Footer -->

</div>

  <!-- JS -->
<script src="/assets/js/jquery-3.2.1.min.js"></script>
<script src="/assets/js/jekyll-search.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'No results found',
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>
<script src="/assets/js/main.js"></script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-149834681-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
